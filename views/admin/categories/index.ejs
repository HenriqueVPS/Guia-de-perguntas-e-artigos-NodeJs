<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <nav class="navbar navbar-light bg-primary navbar-expand-lg">
        <a style="color:white;margin-left: 15px;" class="navbar-brand mr-1" href="/">
            GuiaPress
        </a>
        <ul class="navbar-nav ">
            <li class="nav-item">
                <a style="padding-right:20px;color: white;" class="nav-link" href="/admin/categories">Categorias</a>
            </li>
            <li class="nav-item">
                <a style="padding-right:20px;color: white;" class="nav-link" href="/admin/articles">Artigos</a>
            </li>
        </ul>
    </nav>
    <div class="container mt-4">
    <hr>
    <h2>Categorias</h2>
        <a class="btn btn-success" href="/admin/categories/new">Criar nova categoria</a>
    <hr>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Título</th>
                <th>Slug</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            <% categories.forEach(category => { %>            
            <tr>
                <th><%= category.id %></th>
                <th><%= category.title %></th>
                <th><%= category.slug %></th>
                <th>
                    <a href="/admin/categories/edit/<%= category.id %>" class="btn btn-warning">Editar</a>
                    <form onsubmit="confirmarDelecao(event, this)" method="POST" action="/categories/delete" style="display: inline;">
                        <input type="hidden" name="id" value="<%= category.id %>" >
                        <button class="btn btn-danger">Deletar</button>
                    </form>
                </th>          
            </tr>
            <%  }) %>
        </tbody>
    </table>
    </div>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="/src/public/js/bootstrap.min.js"></script></body>
    <script>
        function confirmarDelecao(event, form) {
            event.preventDefault()

            const confirmacao = confirm('Deseja realmente deletar a categoria?')
            if(confirmacao) {
                form.submit()
            }
        }
    </script>
</body>
</html>